<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>GoSDR Telemetry</title>
  <link rel="stylesheet" href="/static/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <header class="page-header">
    <div>
      <h1>GoSDR Monopulse Tracker</h1>
      <p>Live steering angle and peak telemetry</p>
    </div>
    <nav class="top-nav" aria-label="Primary">
      <a class="active" href="/">Telemetry</a>
      <a href="/settings">Settings</a>
    </nav>
  </header>
  <main>
    <div class="tab-header" role="tablist" aria-label="Telemetry views">
      <button class="tab-button active" role="tab" aria-selected="true" aria-controls="telemetry" data-tab="telemetry">Telemetry</button>
      <button class="tab-button" role="tab" aria-selected="false" aria-controls="trace" data-tab="trace">Trace</button>
      <button class="tab-button" role="tab" aria-selected="false" aria-controls="debug" data-tab="debug">Debug</button>
      <button class="tab-button" role="tab" aria-selected="false" aria-controls="settings" data-tab="settings">Settings</button>
    </div>
    <section id="telemetry" class="tab-panel active" role="tabpanel" aria-label="Telemetry charts">
      <div class="chart-grid">
        <div class="chart-panel radar-panel">
          <h2>Radar Display</h2>
          <canvas id="radarCanvas" width="400" height="250" aria-label="Radar display"></canvas>
          <div class="radar-info">
            <span id="radarAngle">Angle: --</span>
          </div>
        </div>
        <div class="chart-panel">
          <h2>Steering Angle</h2>
          <canvas id="angleChart" aria-label="Angle chart"></canvas>
        </div>
        <div class="chart-panel">
          <h2>Peak Level</h2>
          <canvas id="peakChart" aria-label="Peak chart"></canvas>
        </div>
      </div>
      <div class="history">
        <h2>Latest samples</h2>
        <table id="historyTable" aria-label="Telemetry history">
          <thead>
            <tr>
              <th>Time</th>
              <th>Angle (deg)</th>
              <th>Peak (dBFS)</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
    <section id="trace" class="tab-panel" role="tabpanel" aria-label="Trace view">
      <div class="placeholder">
        <h2>Trace</h2>
        <p>Trace data will appear here when available.</p>
      </div>
    </section>
    <section id="debug" class="tab-panel" role="tabpanel" aria-label="Debug view">
      <div class="debug-panel" aria-live="polite">
        <div class="debug-header">
          <h2>Debug telemetry</h2>
          <p id="debugStatus" class="muted">Waiting for debug dataâ€¦</p>
        </div>
        <div class="debug-grid">
          <div class="debug-card">
            <h3>Phase</h3>
            <div class="debug-value" id="debugPhaseDelay">--</div>
            <p class="muted">Monopulse phase: <span id="debugMonopulsePhase">--</span> rad</p>
          </div>
          <div class="debug-card">
            <h3>Peak</h3>
            <div class="debug-value" id="debugPeakValue">--</div>
            <p class="muted">Bin <span id="debugPeakBin">--</span> in band <span id="debugPeakBand">--</span></p>
          </div>
        </div>
      </div>
    </section>
    <section id="settings" class="tab-panel" role="tabpanel" aria-label="Settings view">
      <div class="placeholder">
        <h2>Settings</h2>
        <p>Manage configuration from the <a href="/settings">settings page</a>.</p>
      </div>
    </section>
  </main>
  <script src="/static/app.js"></script>
</body>

</html>